<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kiến trúc Hệ thống POD Hybrid (Headless Shopify)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #f8fafc; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .box { border-radius: 12px; transition: all 0.3s ease; }
        .box:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .connector { stroke: #64748b; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
        .tracking-connector { stroke: #a855f7; stroke-width: 1.5; stroke-dasharray: 4; fill: none; marker-end: url(#arrowhead-purple); }
        .ab-connector { stroke: #06b6d4; stroke-width: 1.5; stroke-dasharray: 3; fill: none; marker-end: url(#arrowhead-cyan); }
        .review-connector { stroke: #f59e0b; stroke-width: 1.5; fill: none; marker-end: url(#arrowhead-orange); }
        .design-connector { stroke: #ec4899; stroke-width: 2; fill: none; marker-end: url(#arrowhead-pink); }
        .promo-connector { stroke: #10b981; stroke-width: 1.5; stroke-dasharray: 2; fill: none; marker-end: url(#arrowhead-green); }
        .post-connector { stroke: #3b82f6; stroke-width: 1.5; stroke-dasharray: 3; fill: none; marker-end: url(#arrowhead-blue); }
        .ai-connector { stroke: #6366f1; stroke-width: 1.5; stroke-dasharray: 2; fill: none; marker-end: url(#arrowhead-indigo); }
        .label { font-size: 11px; font-weight: 600; fill: #1e293b; }
    </style>
</head>
<body class="p-8">
    <div class="max-w-6xl mx-auto bg-white p-10 rounded-2xl shadow-xl border border-slate-200">
        <h1 class="text-3xl font-bold text-slate-800 mb-2 text-center">Kiến trúc Hệ thống Website POD Hybrid</h1>
        <p class="text-slate-500 text-center mb-10">Mô hình Headless: Shopify + Next.js + Personalizer Engine (Teeinblue Style)</p>

        <svg viewBox="0 0 1000 1400" xmlns="http://www.w3.org/2000/svg">
            <!-- Arrows Definition -->
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#64748b" />
                </marker>
                <marker id="arrowhead-purple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#a855f7" />
                </marker>
                <marker id="arrowhead-cyan" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#06b6d4" />
                </marker>
                <marker id="arrowhead-orange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b" />
                </marker>
                <marker id="arrowhead-pink" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#ec4899" />
                </marker>
                <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#10b981" />
                </marker>
                <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6" />
                </marker>
                <marker id="arrowhead-indigo" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#6366f1" />
                </marker>
                <filter id="shadow">
                    <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.1"/>
                </filter>
            </defs>

            <!-- SECTION: A/B TESTING ENGINE -->
            <rect x="50" y="20" width="300" height="80" rx="15" fill="#ecfeff" stroke="#0891b2" stroke-width="2" />
            <text x="70" y="45" class="label" fill="#0891b2">A/B TESTING LAYER</text>
            <rect x="70" y="55" width="120" height="35" rx="8" fill="white" filter="url(#shadow)" class="box" />
            <text x="130" y="77" text-anchor="middle" font-size="9" class="label">Traffic Splitter</text>
            <rect x="200" y="55" width="130" height="35" rx="8" fill="white" filter="url(#shadow)" class="box" />
            <text x="265" y="77" text-anchor="middle" font-size="9" class="label">Variant Manager</text>

            <!-- SECTION: PROMOTIONS & MARKETING -->
            <rect x="370" y="20" width="280" height="80" rx="15" fill="#f0fdf4" stroke="#10b981" stroke-width="2" />
            <text x="385" y="45" class="label" fill="#10b981">MARKETING & PROMOTIONS</text>
            <rect x="385" y="55" width="120" height="35" rx="8" fill="white" filter="url(#shadow)" class="box" />
            <text x="445" y="77" text-anchor="middle" font-size="9" class="label">Coupon Engine</text>
            <rect x="515" y="55" width="120" height="35" rx="8" fill="white" filter="url(#shadow)" class="box" />
            <text x="575" y="77" text-anchor="middle" font-size="9" class="label">Upsell / Cross-sell</text>

            <!-- SECTION: REVIEW & SOCIAL PROOF -->
            <rect x="680" y="20" width="220" height="150" rx="15" fill="#fffbeb" stroke="#f59e0b" stroke-width="2" />
            <text x="695" y="45" class="label" fill="#f59e0b">REVIEWS & SOCIAL PROOF</text>
            <rect x="700" y="60" width="180" height="40" rx="8" fill="white" filter="url(#shadow)" class="box" />
            <text x="790" y="85" text-anchor="middle" class="label">Review Widget</text>
            <rect x="700" y="110" width="180" height="40" rx="8" fill="white" filter="url(#shadow)" class="box" />
            <text x="790" y="135" text-anchor="middle" class="label">Photo/Video UGC</text>

            <!-- SECTION: PRODUCT PERSONALIZER + AI TOOLS -->
            <rect x="50" y="140" width="600" height="170" rx="15" fill="#fdf2f8" stroke="#db2777" stroke-width="2" />
            <text x="70" y="165" class="label" fill="#db2777">PRODUCT PERSONALIZER ENGINE (Enhanced with AI)</text>
            
            <rect x="70" y="180" width="170" height="50" rx="8" fill="white" filter="url(#shadow)" class="box" />
            <text x="155" y="210" text-anchor="middle" class="label">Live Preview Canvas</text>

            <rect x="255" y="180" width="170" height="50" rx="8" fill="white" filter="url(#shadow)" class="box" />
            <text x="340" y="210" text-anchor="middle" class="label">ClipArt & Font Lib</text>

            <rect x="440" y="180" width="180" height="50" rx="8" fill="white" filter="url(#shadow)" class="box" />
            <text x="530" y="210" text-anchor="middle" class="label">Print-Ready Generator</text>

            <!-- NEW: AI SERVICES BOX -->
            <rect x="70" y="245" width="550" height="50" rx="10" fill="#eef2ff" stroke="#6366f1" stroke-width="1.5" stroke-dasharray="4" />
            <text x="85" y="262" class="label" fill="#4f46e5" font-size="9">AI ENHANCEMENT TOOLS</text>
            
            <rect x="180" y="255" width="140" height="30" rx="5" fill="white" filter="url(#shadow)" class="box" />
            <text x="250" y="274" text-anchor="middle" font-size="9" font-weight="bold">AI Bg Remover</text>
            
            <rect x="330" y="255" width="140" height="30" rx="5" fill="white" filter="url(#shadow)" class="box" />
            <text x="400" y="274" text-anchor="middle" font-size="9" font-weight="bold">Face Detection</text>

            <rect x="480" y="255" width="130" height="30" rx="5" fill="white" filter="url(#shadow)" class="box" />
            <text x="545" y="274" text-anchor="middle" font-size="9" font-weight="bold">Auto-Scale Up</text>

            <!-- SECTION 1: FRONTEND LAYER -->
            <rect x="50" y="340" width="600" height="150" rx="15" fill="#eff6ff" stroke="#3b82f6" stroke-width="2" stroke-dasharray="5,5" />
            <text x="60" y="365" class="label" fill="#3b82f6">FRONTEND LAYER (Next.js)</text>
            
            <rect x="80" y="390" width="180" height="70" rx="10" fill="white" filter="url(#shadow)" class="box" />
            <text x="170" y="420" text-anchor="middle" class="label">Customizer Interface</text>

            <rect x="300" y="390" width="180" height="70" rx="10" fill="white" filter="url(#shadow)" class="box" />
            <text x="390" y="420" text-anchor="middle" class="label">Smart Cart</text>

            <!-- SECTION: HYBRID TRACKING LAYER -->
            <rect x="680" y="340" width="280" height="420" rx="15" fill="#faf5ff" stroke="#a855f7" stroke-width="2" />
            <text x="695" y="365" class="label" fill="#a855f7">HYBRID TRACKING LAYER</text>
            
            <rect x="695" y="385" width="250" height="120" rx="10" fill="white" stroke="#c084fc" stroke-dasharray="3" />
            <text x="705" y="405" font-size="9" font-weight="bold" fill="#7e22ce">1. CLIENT-SIDE (Browser)</text>
            <rect x="705" y="415" width="230" height="35" rx="5" fill="#f5f3ff" />
            <text x="820" y="437" text-anchor="middle" font-size="9" class="label">GTM Web Container</text>
            <rect x="705" y="460" width="230" height="35" rx="5" fill="#f5f3ff" />
            <text x="820" y="482" text-anchor="middle" font-size="9" class="label">FB Pixel / GA4 Tag</text>

            <rect x="695" y="520" width="250" height="220" rx="10" fill="#fdfaff" stroke="#a855f7" />
            <text x="705" y="540" font-size="9" font-weight="bold" fill="#7e22ce">2. SERVER-SIDE (CAPI)</text>
            <rect x="705" y="555" width="230" height="45" rx="5" fill="white" filter="url(#shadow)" />
            <text x="820" y="575" text-anchor="middle" font-size="9" class="label">GTM Server Container</text>
            
            <rect x="705" y="615" width="230" height="45" rx="5" fill="white" filter="url(#shadow)" />
            <text x="820" y="635" text-anchor="middle" font-size="9" class="label">Facebook CAPI</text>

            <rect x="705" y="675" width="230" height="45" rx="5" fill="white" filter="url(#shadow)" />
            <text x="820" y="695" text-anchor="middle" font-size="9" class="label">Mixpanel / Data Warehouse</text>

            <!-- Connections -->
            <path d="M510 100 L510 340" class="promo-connector" />
            <path d="M340 310 L340 340" class="design-connector" />
            <path d="M600 420 L695 420" class="tracking-connector" />
            <path d="M600 640 L695 640" class="tracking-connector" />

            <!-- SECTION 2: BACKEND ENGINE -->
            <path d="M170 490 L170 550" class="connector" />
            <path d="M390 490 L390 550" class="connector" />

            <rect x="50" y="560" width="600" height="240" rx="15" fill="#f0fdf4" stroke="#22c55e" stroke-width="2" />
            <text x="60" y="585" class="label" fill="#22c55e">SHOPIFY BACKEND ENGINE</text>

            <rect x="80" y="610" width="170" height="60" rx="8" fill="white" filter="url(#shadow)" />
            <text x="165" y="645" text-anchor="middle" class="label">Storefront API</text>
            
            <rect x="270" y="610" width="170" height="60" rx="8" fill="white" filter="url(#shadow)" />
            <text x="355" y="635" text-anchor="middle" class="label">Discount Logic</text>

            <rect x="460" y="610" width="170" height="60" rx="8" fill="#ecfdf5" stroke="#10b981" filter="url(#shadow)" />
            <text x="545" y="645" text-anchor="middle" class="label">Orders & Print Assets</text>

            <!-- SECTION: POST-PURCHASE & LOYALTY -->
            <rect x="80" y="690" width="550" height="90" rx="10" fill="#f0f9ff" stroke="#0ea5e9" stroke-width="1.5" />
            <text x="95" y="710" class="label" fill="#0369a1">POST-PURCHASE & LOYALTY MODULE</text>
            <rect x="95" y="720" width="160" height="40" rx="8" fill="white" filter="url(#shadow)" class="box" />
            <text x="175" y="745" text-anchor="middle" font-size="9" class="label">Loyalty Points</text>
            <rect x="265" y="720" width="160" height="40" rx="8" fill="white" filter="url(#shadow)" class="box" />
            <text x="345" y="745" text-anchor="middle" font-size="9" class="label">Post-Purchase Upsell</text>
            <rect x="435" y="720" width="180" height="40" rx="8" fill="white" filter="url(#shadow)" class="box" />
            <text x="525" y="745" text-anchor="middle" font-size="9" class="label">Referral Program</text>

            <!-- SECTION 3: POD FULFILLMENT -->
            <path d="M355 800 L355 860" class="connector" />
            
            <rect x="50" y="870" width="850" height="120" rx="15" fill="#fff7ed" stroke="#f97316" stroke-width="2" />
            <text x="60" y="895" class="label" fill="#f97316">POD FULFILLMENT PARTNER (Automated Sync)</text>

            <rect x="100" y="915" width="300" height="50" rx="8" fill="white" filter="url(#shadow)" />
            <text x="250" y="945" text-anchor="middle" class="label">Automatic Ingestion of Designs</text>

            <rect x="550" y="915" width="300" height="50" rx="8" fill="white" filter="url(#shadow)" />
            <text x="700" y="945" text-anchor="middle" class="label">Quality Check & Print</text>

            <!-- FOOTER LEGEND -->
            <rect x="50" y="1020" width="850" height="100" rx="10" fill="#f1f5f9" />
            <text x="70" y="1050" font-size="11" fill="#475569">
                <tspan font-weight="bold">AI Enhancement Tools:</tspan> Module tích hợp các API như Remove.bg, TensorFlow.js để tự động xử lý ảnh của khách hàng.
            </text>
            <text x="70" y="1075" font-size="11" fill="#475569">
                - AI Bg Remover: Tự động tách nền khi khách hàng upload ảnh chân dung, vật nuôi.
            </text>
            <text x="70" y="1100" font-size="11" fill="#475569">
                - Face Detection: Tự động crop ảnh và căn chỉnh khuôn mặt vào đúng vị trí thiết kế trên sản phẩm (vd: in mặt lên tất, gối).
            </text>
        </svg>

        <div class="mt-8 grid grid-cols-4 gap-4 text-xs">
            <div class="p-3 bg-indigo-50 rounded-lg border border-indigo-100">
                <h3 class="font-bold text-indigo-700 mb-1">AI Background Removal</h3>
                <p class="text-indigo-600">Sử dụng API (như Remove.bg hoặc AI nội bộ) để tách nền ảnh chỉ trong 1s, giúp thiết kế hòa hợp với màu áo.</p>
            </div>
            <div class="p-3 bg-blue-50 rounded-lg border border-blue-100">
                <h3 class="font-bold text-blue-700 mb-1">Smart Face Detection</h3>
                <p class="text-blue-600">Tự động nhận diện mắt/mũi/miệng để gợi ý vùng cắt ảnh tối ưu nhất, tránh việc khách cắt mất một phần khuôn mặt.</p>
            </div>
            <div class="p-3 bg-violet-50 rounded-lg border border-violet-100">
                <h3 class="font-bold text-violet-700 mb-1">Image Upscaling</h3>
                <p class="text-violet-700">Tự động tăng độ phân giải cho các ảnh chất lượng thấp của khách hàng bằng AI để đảm bảo bản in sắc nét (300 DPI).</p>
            </div>
            <div class="p-3 bg-slate-50 rounded-lg border border-slate-100">
                <h3 class="font-bold text-slate-700 mb-1">UX Automation</h3>
                <p class="text-slate-600">Giảm bớt thao tác thủ công cho khách hàng, tăng tỷ lệ hoàn tất thiết kế và thanh toán đơn hàng.</p>
            </div>
        </div>
    </div>
</body>
</html>
